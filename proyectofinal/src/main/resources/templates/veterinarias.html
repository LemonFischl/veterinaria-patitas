<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Patitas al Rescate - Veterinarias</title>
    <!--Librerías css-->
    <th:block th:insert="~{fragmentos :: Links-css}" />
</head>

<body>
<!--Cabecera-->
<div th:replace="~{fragmentos :: Cabecera}"></div>

<!-- Carrusel -->
<div id="carouselExampleIndicators" class="carousel slide">
    <div class="carousel-indicators">
        <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="0" class="active"
                aria-current="true" aria-label="Slide 1"></button>
        <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="1"
                aria-label="Slide 2"></button>
        <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="2"
                aria-label="Slide 3"></button>
        <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="3"
                aria-label="Slide 4"></button>
        <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="4"
                aria-label="Slide 5"></button>
    </div>
    <div class="carousel-inner">
        <div class="carousel-item active">
            <img th:src="@{/IMG/vets1.jpg}" class="d-block w-100" alt="...">
            <!-- Texto de enganche -->
            <div class="carousel-caption custom-caption">
                <h2>Reserva tu consulta veterinaria en línea</h2>
                <h1>Cuidamos la salud de tu mascota</h1>
                <p>Agenda una evaluación con un profesional calificado sin salir de casa. Rápido, seguro y confiable.</p>
            </div>
        </div>
        <div class="carousel-item">
            <img th:src="@{/IMG/vets2.jpg}" class="d-block w-100" alt="...">
            <!-- Texto de enganche -->
            <div class="carousel-caption custom-caption">
                <h2>Vacunación a tiempo, mascotas sanas</h2>
                <h1>Protege a quien más quieres</h1>
                <p>Reserva vacunas esenciales para tu mascota y evita enfermedades prevenibles. ¡Es rápido y fácil!</p>
            </div>
        </div>
        <div class="carousel-item">
            <img th:src="@{/IMG/vets3.jpg}" class="d-block w-100" alt="...">
            <!-- Texto de enganche -->
            <div class="carousel-caption custom-caption">
                <h2>Baños para que tu mascota luzca y huela bien</h2>
                <h1>Frescura y limpieza al alcance de un clic</h1>
                <p>Agenda un baño con profesionales que cuidan cada detalle. Higiene, confort y cariño garantizados.</p>
            </div>

        </div>
        <div class="carousel-item">
            <img th:src="@{/IMG/vets4.jpg}" class="d-block w-100" alt="...">
            <!-- Texto de enganche -->
            <div class="carousel-caption custom-caption">
                <h2>Estilo y comodidad para tu mascota</h2>
                <h1>Corte de pelo profesional</h1>
                <p>Reserva un corte con groomers expertos que dejarán a tu peludo feliz y hermoso.</p>
            </div>
        </div>
        <div class="carousel-item">
            <img th:src="@{/IMG/vets5.jpg}" class="d-block w-100" alt="...">
            <!-- Texto de enganche -->
            <div class="carousel-caption custom-caption">
                <h2>Desparasitación segura y efectiva</h2>
                <h1>Protección total para tu mascota</h1>
                <p>Elimina parásitos internos y externos. Agenda el tratamiento adecuado con apoyo profesional.</p>
            </div>
        </div>
    </div>
    <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleIndicators"
            data-bs-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Previous</span>
    </button>
    <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleIndicators"
            data-bs-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Next</span>
    </button>
</div>

<!-- Veterinarias -->
<div class="container mt-5">
    <div th:each="vet, stat : ${veterinarias}">
        <!-- Abrir nueva fila cada 2 veterinarias -->
        <div class="row" th:if="${stat.index % 2 == 0}">
            <!-- Primera veterinaria (col 1) -->
            <div class="col-md-6 mb-4">
                <div class="card card-vet shadow-sm" style="max-width: 100%; transition: transform 0.3s ease;">
                    <div class="row g-0">
                        <div class="col-md-4">
                            <img th:src="${vet.imagenUrl}" class="img-fluid rounded-start"
                                 style="width: 100%; aspect-ratio: 1/1; object-fit: cover; object-position: center;"
                                 alt="Veterinaria">
                        </div>
                        <div class="col-md-8">
                            <div class="card-body">
                                <h5 class="card-title fw-bold" th:text="${vet.nombre}">Nombre Veterinaria</h5>
                                <p class="card-text" th:text="${vet.descripcion}">Descripción</p>
                                <a class="btn btn-sm btn-info" href="#" data-bs-toggle="modal"
                                   th:attr="data-bs-target='#modalVet__' + ${vet.id_vet}">+ info</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Segunda veterinaria (col 2) si existe -->
            <div class="col-md-6 mb-4" th:if="${stat.index + 1 < veterinarias.size()}">
                <div class="card card-vet shadow-sm" style="max-width: 100%; transition: transform 0.3s ease;">
                    <div class="row g-0">
                        <div class="col-md-4">
                            <img th:src="${veterinarias[stat.index + 1].imagenUrl}" class="img-fluid rounded-start"
                                 style="width: 100%; aspect-ratio: 1/1; object-fit: cover; object-position: center;" alt="Veterinaria">
                        </div>
                        <div class="col-md-8">
                            <div class="card-body">
                                <h5 class="card-title fw-bold" th:text="${veterinarias[stat.index + 1].nombre}">Nombre Veterinaria</h5>
                                <p class="card-text" th:text="${veterinarias[stat.index + 1].descripcion}">Descripción</p>
                                <a class="btn morado btn-sm" href="#" data-bs-toggle="modal"
                                   th:attr="data-bs-target='#modalVet__' + ${veterinarias[stat.index + 1].id_vet}">+ info</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


<!-- Modales dinámicos generados con Thymeleaf -->
<div th:each="vet : ${veterinarias}">
    <div class="modal fade" th:id="'modalVet__' + ${vet.id_vet}" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-scrollable modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" th:text="${vet.nombre}">Veterinaria</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <p><strong>Teléfono:</strong> <span th:text="${vet.telefono}"></span></p>
                    <p><strong>Correo:</strong> <span th:text="${vet.correoElectronico}"></span></p>
                    <p><strong>Dirección:</strong> <span th:text="${vet.direccion}"></span></p>
                    <p><strong>Sitio Web:</strong>
                        <a th:href="${vet.sitioWeb}" target="_blank" th:text="${vet.sitioWeb}"></a>
                    </p>
                    <p><strong>Horario:</strong>
                        <span th:text="${vet.horaInicio}"></span> - <span th:text="${vet.horaFin}"></span>
                    </p>
                    <p><strong>Servicios:</strong>
                        <span th:text="${#strings.arrayJoin(#lists.sort(vet.serviciosGenerales), ', ')}"></span>
                    </p>
                    <p><strong>Días de atención:</strong>
                        <span th:text="${#strings.arrayJoin(#lists.sort(vet.diasDeAtencion), ', ')}"></span>
                    </p>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                </div>
            </div>
        </div>
    </div>
</div>

<!--Footer-->
<footer class="footer mt-auto mt-2 text-white" th:insert="~{fragmentos :: Pie}">
</footer>


<!-- Librerías de js-->
<th:block th:insert="~{fragmentos :: Links-js}"/>
</body>

</html>